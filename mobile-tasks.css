/* ═══════════════════════════════════════════════════════════════════════════
   TASKS MODULE - MOBILE COMPLETE UI
   Full-featured mobile task management
   ═══════════════════════════════════════════════════════════════════════════ */

@media (max-width: 768px) {

    /* ===== TASKS MODULE MOBILE LAYOUT ===== */
    #mod-tasks {
        flex-direction: column !important;
    }

    /* ===== HIDE DESKTOP SIDEBAR ON MOBILE ===== */
    .task-sidebar {
        display: none !important;
    }

    /* ===== MOBILE TASK HEADER ===== */
    .task-board-header {
        flex-direction: column !important;
        gap: 16px !important;
        padding: 20px 16px !important;
        background: var(--bg-surface) !important;
        border-radius: 16px !important;
        margin-bottom: 20px !important;
    }

    .task-board-header > div:first-child {
        width: 100% !important;
    }

    #proj-header {
        font-size: 1.5rem !important;
        margin-bottom: 4px !important;
    }

    .task-board-header .flex.gap-10 {
        width: 100% !important;
        flex-wrap: wrap !important;
        gap: 8px !important;
    }

    .task-board-header .btn {
        flex: 1 1 calc(50% - 4px) !important;
        min-width: 140px !important;
        justify-content: center !important;
    }

    /* ===== MOBILE PROJECT SELECTOR (NEW) ===== */
    #mobile-project-selector {
        position: fixed;
        bottom: 70px;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-top: 0.5px solid rgba(0, 0, 0, 0.1);
        padding: 12px 16px;
        z-index: 998;
        display: flex;
        align-items: center;
        gap: 12px;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1);
    }

    #mobile-project-selector.hidden {
        transform: translateY(100%);
    }

    .mobile-project-chip {
        flex-shrink: 0;
        padding: 10px 20px;
        background: var(--bg-surface);
        border-radius: 20px;
        border: 1.5px solid var(--border-color);
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.2s;
        white-space: nowrap;
    }

    .mobile-project-chip.active {
        background: var(--accent-color);
        color: white;
        border-color: var(--accent-color);
    }

    .mobile-project-chip:active {
        transform: scale(0.95);
    }

    /* ===== ADD PROJECT CHIP ===== */
    .mobile-project-chip.add-project {
        background: transparent;
        border-style: dashed;
        color: var(--accent-color);
    }

    /* ===== MOBILE TASK LIST ===== */
    .task-list-container {
        padding: 0 !important;
    }

    .task-cols {
        display: none !important; /* Hide desktop columns */
    }

    #task-rows {
        display: flex !important;
        flex-direction: column !important;
        gap: 12px !important;
        padding: 0 16px 100px 16px !important;
    }

    /* ===== MOBILE TASK CARD ===== */
    .task-row {
        display: flex !important;
        flex-direction: column !important;
        background: var(--bg-surface) !important;
        border-radius: 16px !important;
        padding: 16px !important;
        border: 1.5px solid var(--border-color) !important;
        position: relative !important;
        transition: all 0.3s cubic-bezier(0.32, 0.72, 0, 1) !important;
        cursor: pointer !important;
        width: 100% !important;
        max-width: none !important;
    }

    .task-row:active {
        transform: scale(0.98) !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
    }

    .task-row.completed {
        opacity: 0.6 !important;
        border-color: var(--status-success) !important;
    }

    /* ===== TASK CARD CONTENT ===== */
    .task-card-header {
        display: flex !important;
        align-items: center !important;
        gap: 12px !important;
        margin-bottom: 12px !important;
    }

    .task-checkbox {
        width: 24px !important;
        height: 24px !important;
        border-radius: 8px !important;
        border: 2px solid var(--border-color) !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        flex-shrink: 0 !important;
        background: transparent !important;
        transition: all 0.2s !important;
    }

    .task-row.completed .task-checkbox {
        background: var(--status-success) !important;
        border-color: var(--status-success) !important;
    }

    .task-checkbox i {
        color: white !important;
        font-size: 0.9rem !important;
        opacity: 0 !important;
    }

    .task-row.completed .task-checkbox i {
        opacity: 1 !important;
    }

    .task-title-mobile {
        flex: 1 !important;
        font-size: 1rem !important;
        font-weight: 600 !important;
        color: var(--text-primary) !important;
        word-break: break-word !important;
    }

    .task-row.completed .task-title-mobile {
        text-decoration: line-through !important;
        opacity: 0.6 !important;
    }

    /* ===== TASK META INFO ===== */
    .task-card-meta {
        display: flex !important;
        align-items: center !important;
        gap: 12px !important;
        flex-wrap: wrap !important;
        font-size: 0.85rem !important;
        color: var(--text-secondary) !important;
    }

    .task-meta-item {
        display: flex !important;
        align-items: center !important;
        gap: 6px !important;
        padding: 6px 10px !important;
        background: var(--hover-bg) !important;
        border-radius: 8px !important;
    }

    .task-priority-high {
        color: var(--status-danger) !important;
        background: rgba(239, 68, 68, 0.1) !important;
    }

    .task-priority-medium {
        color: var(--status-warning) !important;
        background: rgba(245, 158, 11, 0.1) !important;
    }

    .task-priority-low {
        color: var(--status-success) !important;
        background: rgba(16, 185, 129, 0.1) !important;
    }

    /* ===== TASK SWIPE ACTIONS ===== */
    .task-row {
        touch-action: pan-y !important;
    }

    .task-swipe-actions {
        position: absolute !important;
        top: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        display: flex !important;
        align-items: center !important;
        gap: 8px !important;
        padding: 0 16px !important;
        opacity: 0 !important;
        pointer-events: none !important;
        transition: opacity 0.2s !important;
    }

    .task-row.swiping .task-swipe-actions {
        opacity: 1 !important;
        pointer-events: all !important;
    }

    .swipe-action-btn {
        width: 44px !important;
        height: 44px !important;
        border-radius: 12px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        color: white !important;
        font-size: 1.2rem !important;
    }

    .swipe-action-complete {
        background: var(--status-success) !important;
    }

    .swipe-action-delete {
        background: var(--status-danger) !important;
    }

    /* ===== EMPTY STATE ===== */
    .task-empty-state {
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        justify-content: center !important;
        padding: 60px 20px !important;
        text-align: center !important;
    }

    .task-empty-icon {
        font-size: 4rem !important;
        color: var(--text-secondary) !important;
        opacity: 0.3 !important;
        margin-bottom: 20px !important;
    }

    .task-empty-title {
        font-size: 1.2rem !important;
        font-weight: 700 !important;
        color: var(--text-primary) !important;
        margin-bottom: 8px !important;
    }

    .task-empty-subtitle {
        font-size: 0.9rem !important;
        color: var(--text-secondary) !important;
        margin-bottom: 24px !important;
    }

    /* ===== MOBILE FAB FOR TASKS ===== */
    #mobile-task-fab {
        position: fixed !important;
        bottom: 90px !important;
        right: 20px !important;
        width: 56px !important;
        height: 56px !important;
        border-radius: 50% !important;
        background: linear-gradient(135deg, #FF512F 0%, #DD2476 100%) !important;
        color: white !important;
        border: none !important;
        box-shadow: 0 8px 24px rgba(255, 81, 47, 0.4) !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-size: 1.5rem !important;
        z-index: 999 !important;
        transition: all 0.3s cubic-bezier(0.32, 0.72, 0, 1) !important;
    }

    #mobile-task-fab:active {
        transform: scale(0.9) !important;
    }

    #mobile-task-fab.with-menu {
        width: auto !important;
        border-radius: 28px !important;
        padding: 0 20px !important;
        gap: 10px !important;
    }

    /* ===== FAB MENU ===== */
    .fab-menu {
        position: fixed !important;
        bottom: 160px !important;
        right: 20px !important;
        background: white !important;
        border-radius: 16px !important;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;
        padding: 8px !important;
        opacity: 0 !important;
        transform: translateY(20px) scale(0.9) !important;
        pointer-events: none !important;
        transition: all 0.3s cubic-bezier(0.32, 0.72, 0, 1) !important;
        z-index: 998 !important;
    }

    .fab-menu.active {
        opacity: 1 !important;
        transform: translateY(0) scale(1) !important;
        pointer-events: all !important;
    }

    .fab-menu-item {
        display: flex !important;
        align-items: center !important;
        gap: 12px !important;
        padding: 12px 16px !important;
        border-radius: 12px !important;
        color: var(--text-primary) !important;
        font-size: 0.95rem !important;
        font-weight: 600 !important;
        cursor: pointer !important;
        transition: background 0.2s !important;
        white-space: nowrap !important;
    }

    .fab-menu-item:active {
        background: var(--hover-bg) !important;
    }

    .fab-menu-item i {
        width: 24px !important;
        color: var(--accent-color) !important;
    }

    /* ===== TASK DETAIL PANEL (MOBILE BOTTOM SHEET) ===== */
    #task-panel {
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        top: auto !important;
        max-height: 85vh !important;
        background: var(--bg-surface) !important;
        border-radius: 24px 24px 0 0 !important;
        box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.15) !important;
        padding: 24px 20px 40px !important;
        overflow-y: auto !important;
        transform: translateY(100%) !important;
        transition: transform 0.4s cubic-bezier(0.32, 0.72, 0, 1) !important;
        z-index: 1002 !important;
    }

    #task-panel.active {
        transform: translateY(0) !important;
    }

    /* ===== BOTTOM SHEET HANDLE ===== */
    #task-panel::before {
        content: '' !important;
        display: block !important;
        width: 40px !important;
        height: 4px !important;
        background: rgba(0, 0, 0, 0.2) !important;
        border-radius: 2px !important;
        margin: 0 auto 20px !important;
    }

    #task-panel .flex.justify-between {
        margin-bottom: 20px !important;
    }

    #task-panel .btn {
        min-width: 48px !important;
        height: 48px !important;
        padding: 12px !important;
    }

    #edit-title {
        font-size: 1.3rem !important;
        margin-bottom: 16px !important;
    }

    /* ===== TASK PANEL BACKDROP ===== */
    .task-panel-backdrop {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: rgba(0, 0, 0, 0.4) !important;
        z-index: 1001 !important;
        opacity: 0 !important;
        pointer-events: none !important;
        transition: opacity 0.3s !important;
    }

    .task-panel-backdrop.active {
        opacity: 1 !important;
        pointer-events: all !important;
    }

    /* ===== QUICK ADD TASK BUTTON ===== */
    .quick-add-task {
        display: flex !important;
        align-items: center !important;
        gap: 12px !important;
        padding: 16px !important;
        background: transparent !important;
        border: 2px dashed var(--border-color) !important;
        border-radius: 16px !important;
        color: var(--text-secondary) !important;
        font-size: 0.95rem !important;
        font-weight: 600 !important;
        cursor: pointer !important;
        transition: all 0.2s !important;
        margin: 0 16px 100px 16px !important;
    }

    .quick-add-task:active {
        background: var(--hover-bg) !important;
        border-color: var(--accent-color) !important;
        color: var(--accent-color) !important;
    }

    /* ===== PROJECT STATS (MOBILE) ===== */
    .mobile-project-stats {
        display: flex !important;
        gap: 12px !important;
        padding: 16px !important;
        background: var(--bg-surface) !important;
        border-radius: 16px !important;
        margin: 0 16px 16px 16px !important;
    }

    .mobile-stat-item {
        flex: 1 !important;
        text-align: center !important;
        padding: 12px !important;
        background: var(--hover-bg) !important;
        border-radius: 12px !important;
    }

    .mobile-stat-number {
        font-size: 1.5rem !important;
        font-weight: 700 !important;
        color: var(--accent-color) !important;
        margin-bottom: 4px !important;
    }

    .mobile-stat-label {
        font-size: 0.75rem !important;
        color: var(--text-secondary) !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
    }

    /* ===== FILTER CHIPS (MOBILE) ===== */
    .mobile-task-filters {
        display: flex !important;
        gap: 8px !important;
        padding: 12px 16px !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }

    .filter-chip {
        flex-shrink: 0 !important;
        padding: 8px 16px !important;
        background: var(--bg-surface) !important;
        border-radius: 16px !important;
        border: 1.5px solid var(--border-color) !important;
        font-size: 0.85rem !important;
        font-weight: 600 !important;
        color: var(--text-secondary) !important;
        cursor: pointer !important;
        transition: all 0.2s !important;
    }

    .filter-chip.active {
        background: var(--accent-color) !important;
        color: white !important;
        border-color: var(--accent-color) !important;
    }

    /* ===== DARK MODE ===== */
    .theme-dark #mobile-project-selector {
        background: rgba(28, 28, 30, 0.95) !important;
        border-top-color: rgba(255, 255, 255, 0.08) !important;
    }

    .theme-dark .mobile-project-chip {
        background: rgba(44, 44, 46, 1) !important;
    }

    .theme-dark .task-panel-backdrop {
        background: rgba(0, 0, 0, 0.6) !important;
    }

    /* ===== LANDSCAPE MODE ===== */
    @media (orientation: landscape) and (max-height: 500px) {
        #mobile-project-selector {
            bottom: 60px !important;
            padding: 8px 16px !important;
        }

        #mobile-task-fab {
            bottom: 70px !important;
            right: 16px !important;
            width: 48px !important;
            height: 48px !important;
        }

        #task-panel {
            max-height: 75vh !important;
        }
    }

}
